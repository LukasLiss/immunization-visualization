import{s as p,c as ut,t as pt,o as F,a as G,b as H,e as S,d as w,l as M,m as K,f as P,g as U,h as X,i as V}from"./vendor.481e9550.js";const ht=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}};ht();let k=!1,j=!1,Y=660,J=200,Q=660,Z=400,mt=100,g=4,A=8,ft=1,L=()=>0+g,tt=()=>Q-g,W=()=>0+g,et=()=>Z-g,yt=5,N=5,D=1,nt=!1,q=!1,h=0,$=365*1,_=0,O=[],c=[],at,it,lt,ot,st,rt;class gt{constructor(t,s,o,e,n,d=1,m=4){this.status=d,this.rnumber=n,this.numOfInfected=0;let B=Math.random()*(tt()-L())+L(),r=Math.random()*(et()-W())+W(),u=p5.Vector.random2D();u.x=B,u.y=r,this.position=u,this.velocity=p5.Vector.random2D().setMag(m)}show(){this.status==1&&fill(it),this.status==2&&fill(ot),this.status==3&&fill(rt),noStroke(),ellipse(this.position.x,this.position.y,A*2,A*2),this.status==1&&fill(at),this.status==2&&fill(lt),this.status==3&&fill(st),noStroke(),ellipse(this.position.x,this.position.y,g*2,g*2)}update(){this.position.add(this.velocity),this.position.x>=tt()&&this.velocity.x>0&&(this.velocity.x=-1*this.velocity.x),this.position.x<=L()&&this.velocity.x<0&&(this.velocity.x=-1*this.velocity.x),this.position.y>=et()&&this.velocity.y>0&&(this.velocity.y=-1*this.velocity.y),this.position.y<=W()&&this.velocity.y<0&&(this.velocity.y=-1*this.velocity.y)}collisioncheck(){if(this.status==2)for(let t=0;t<c.length;t++){if(c[t].status!=1)continue;if(Math.sqrt((c[t].position.x-this.position.x)**2+(c[t].position.y-this.position.y)**2)<=2*A&&(c[t].status=2,this.numOfInfected=this.numOfInfected+1,this.numOfInfected>=this.rnumber))break}}}function xt(l){const t={top:60,right:230,bottom:50,left:50},s=Y-t.left-t.right,o=J-t.top-t.bottom,e=p(l).append("svg").attr("width",s+t.left+t.right).attr("height",o+t.top+t.bottom).append("g").attr("transform",`translate(${t.left}, ${t.top})`);ut("./cleaned-world-data-in-million.csv",n=>({date:pt("%Y-%m-%d")(n.date),Total_Cases:parseInt(n.Total_Cases),Total_Deaths:parseInt(n.Total_Deaths)})).then(function(n){const d=n.columns.slice(1),m=F().domain(d).range(["#e01e1f","#363e37"]),B=G().keys(d)(n),r=H().domain(S(n,function(a){return a.date})).range([0,s]),u=e.append("g").attr("transform",`translate(0, ${o})`).call(w(r).ticks(5));e.append("text").attr("text-anchor","end").attr("x",s).attr("y",o+40).text("Time (year)"),e.append("text").attr("text-anchor","end").attr("x",0).attr("y",-20).text("# of People in Million").attr("text-anchor","start");const I=M().domain([0,K(n,a=>+a.Total_Cases+a.Total_Deaths)]).range([o,0]);e.append("g").call(P(I).ticks(5)),e.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("width",s).attr("height",o).attr("x",0).attr("y",0);const x=U().extent([[0,0],[s,o]]).on("end",C),v=e.append("g").attr("clip-path","url(#clip)"),b=X().x(function(a){return r(a.data.date)}).y0(function(a){return I(a[0])}).y1(function(a){return I(a[1])});v.selectAll("mylayers").data(B).join("path").attr("class",function(a){return"myArea "+a.key}).style("fill",function(a){return m(a.key)}).attr("d",b),v.append("g").attr("class","brush").call(x);let E;function R(){E=null}function C(a,y){if(extent=a.selection,extent)r.domain([r.invert(extent[0]),r.invert(extent[1])]),v.select(".brush").call(x.move,null);else{if(!E)return E=setTimeout(R,350);r.domain(S(n,function(dt){return dt.date}))}u.transition().duration(1e3).call(w(r).ticks(5)),v.selectAll("path").transition().duration(1e3).attr("d",b)}const T=function(a,y){V(".myArea").style("opacity",.1),p("."+y).style("opacity",1)},f=function(a,y){V(".myArea").style("opacity",1)},i=20;e.selectAll("myrect").data(d).join("rect").attr("x",400).attr("y",function(a,y){return 10+y*(i+5)}).attr("width",i).attr("height",i).style("fill",function(a){return m(a)}).on("mouseover",T).on("mouseleave",f),e.selectAll("mylabels").data(d).join("text").attr("x",400+i*1.2).attr("y",function(a,y){return 10+y*(i+5)+i/2}).style("fill",function(a){return m(a)}).text(function(a){return a}).attr("text-anchor","left").style("alignment-baseline","middle").on("mouseover",T).on("mouseleave",f)})}function vt(l,t){const s={top:60,right:230,bottom:50,left:50},o=Y-s.left-s.right,e=J-s.top-s.bottom;p(l).html(null);const n=p(l).append("svg").attr("width",o+s.left+s.right).attr("height",e+s.top+s.bottom).append("g").attr("transform",`translate(${s.left}, ${s.top})`),d=["Total_Cases","Total_Deaths"],m=F().domain(d).range(["#e01e1f","#363e37"]),B=G().keys(d)(t);let r;q?(r=H().domain([0,$]).range([0,o]),n.append("g").attr("transform",`translate(0, ${e})`).call(w(r).ticks(5))):(r=H().domain(S(t,function(i){return i.date})).range([0,o]),n.append("g").attr("transform",`translate(0, ${e})`).call(w(r).ticks(5))),n.append("text").attr("text-anchor","end").attr("x",o).attr("y",e+40).text("Time in days"),n.append("text").attr("text-anchor","end").attr("x",0).attr("y",-20).text("% of People in Simulation").attr("text-anchor","start");let u;q?(u=M().domain([0,mt]).range([e,0]),n.append("g").call(P(u).ticks(5))):(u=M().domain([0,K(t,i=>+i.Total_Cases+i.Total_Deaths)]).range([e,0]),n.append("g").call(P(u).ticks(5))),n.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("width",o).attr("height",e).attr("x",0).attr("y",0);const I=U().extent([[0,0],[o,e]]).on("end",R),x=n.append("g").attr("clip-path","url(#clip)"),v=X().x(function(i){return r(i.data.date)}).y0(function(i){return u(i[0])}).y1(function(i){return u(i[1])});x.selectAll("mylayers").data(B).join("path").attr("class",function(i){return"myArea "+i.key}).style("fill",function(i){return m(i.key)}).attr("d",v),x.append("g").attr("class","brush").call(I);let b;function E(){b=null}function R(i,a){if(extent=i.selection,extent)r.domain([r.invert(extent[0]),r.invert(extent[1])]),x.select(".brush").call(I.move,null);else{if(!b)return b=setTimeout(E,350);r.domain(S(t,function(y){return y.date}))}xAxis.transition().duration(1e3).call(w(r).ticks(5)),x.selectAll("path").transition().duration(1e3).attr("d",v)}const C=function(i,a){V(".myArea").style("opacity",.1),p("."+a).style("opacity",1)},T=function(i,a){V(".myArea").style("opacity",1)},f=20;n.selectAll("myrect").data(d).join("rect").attr("x",400).attr("y",function(i,a){return 10+a*(f+5)}).attr("width",f).attr("height",f).style("fill",function(i){return m(i)}).on("mouseover",C).on("mouseleave",T),n.selectAll("mylabels").data(d).join("text").attr("x",400+f*1.2).attr("y",function(i,a){return 10+a*(f+5)+f/2}).style("fill",function(i){return m(i)}).text(function(i){return i}).attr("text-anchor","left").style("alignment-baseline","middle").on("mouseover",C).on("mouseleave",T)}function ct(){c=[];for(let l=0;l<100;l++)c.push(new gt(Q,Z,g,A,100,1,ft));c[0].status=2,z()}window.setup=function(){at=color(52,123,184),it=color(174,202,227),lt=color(224,30,31),ot=color(243,165,165),st=color(76,172,76),rt=color(183,222,183),createVector(1,4),createCanvas(660,400).parent("simulation-canvas"),background(255,0,200)};window.draw=function(){background(240,240,240),k&&_>=$&&(k=!1,console.log("Animation stopped - end reached."));let l=0;if(c.map(t=>{k&&(t.update(),t.collisioncheck(),t.status==2&&(l=l+1)),t.show()}),k){let t=l*(N/100);l=l-t,_=_+1,O.push({date:_,Total_Cases:l,Total_Deaths:t}),vt("#chart"+h,O)}};document.getElementById("play-btn").onclick=()=>{j?(document.getElementById("play-btn").value="Start",k=!1,j=!1,kt()):(document.getElementById("play-btn").value="Reset",j=!0,bt())};document.getElementById("spread-input").oninput=()=>{let l=parseInt(document.getElementById("spread-input").value);A=g+l};document.getElementById("dead-input").oninput=()=>{N=parseInt(document.getElementById("dead-input").value)};function z(){let l=parseInt(document.getElementById("vac-input").value);document.getElementById("vac-text").innerHTML="Vaccination Rate: "+l*10+"%";let t=parseInt(c.length*(l/10)),s=parseInt(c.length*(D/10));for(let o=0;o<Math.max(s,t)&&o<c.length;o++)o<t?c[c.length-1-o].status=3:c[c.length-1-o].status=1;c[0].status=2,D=l}document.getElementById("vac-input").oninput=()=>{z()};document.getElementById("simStepInput").onchange=()=>{let l=document.getElementById("simStepInput").value;l==0?($=365,document.getElementById("simStepInput").value=365):$=parseInt(l)};document.getElementById("axisToggleInput").onclick=()=>{q=!document.getElementById("axisToggleInput").checked};function It(){p("#chart-list").insert("div",":first-child").attr("class","sim-container").attr("id","container-chart"+h),p("#container-chart"+h).append("h4").attr("class","chart-header").html("Simulation Number: "+h),p("#container-chart"+h).append("p").attr("class","chart-text").html("Spread: "+yt*10+"%; Deadliness: "+N+"%; Vaccination Rate: "+D*10+"%"),p("#container-chart"+h).append("div",":first-child").attr("id","chart"+h)}function bt(){O=[],h=h+1,It(),_=0,k=!0,document.getElementById("spread-input").disabled=!0,document.getElementById("dead-input").disabled=!0,document.getElementById("vac-input").disabled=!0,document.getElementById("simStepInput").disabled=!0,document.getElementById("axisToggleInput").disabled=!0,D>=5&&(nt=!0)}function kt(){ct(),document.getElementById("spread-input").disabled=!1,document.getElementById("dead-input").disabled=!1,document.getElementById("vac-input").disabled=!1,document.getElementById("simStepInput").disabled=!1,document.getElementById("axisToggleInput").disabled=!1,O=[],_=0,nt==!1&&h>=1?p("#tipp").style("display","block"):p("#tipp").style("display","none")}xt("#chartReal");ct();z();
